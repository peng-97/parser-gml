/*!
 * parser-gml v0.2.2
 * LICENSE : MIT
  AUTHOR  : pengz 
* */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).parserGml={})}(this,(function(e){"use strict";const t={shape:["geometry","the_geom","geom","shape"]};function n(e,t){return{type:"Point",coordinates:e.split(t).map((function(e){return parseFloat(e)}))}}function o(e){let t=Object.keys(e)[0],o=[];if("posList"==t){let n=e[t].split(" ");n.forEach((function(e,t){t%2!=0&&o.push([Number.parseFloat(n[t-1]),Number.parseFloat(n[t])])}))}else e[t].split(" ").map((function(e){o.push(n(e,",").coordinates)}));return{type:"LineString",coordinates:o}}function r(e){switch(Object.keys(e)[0].toLowerCase()){case"point":return function(e){let t=Object.keys(e)[0];return n(e[t],"pos"==t?" ":",")}(e[Object.keys(e)[0]]);case"linestring":return o(e[Object.keys(e)[0]]);case"polygon":return function(e){let t=Object.keys(e)[0],n=[];return e[t]instanceof Array?e[t].forEach((function(e){n.push(o(e[Object.keys(e)[0]]).coordinates)})):n.push(o(e[t][Object.keys(e[t])[0]]).coordinates),{type:"Polygon",coordinates:n}}(e[Object.keys(e)[0]]);default:return function(e){let t=Object.keys(e)[0];if(e[t]instanceof Array){let n=e[t].map((function(e){return r(e)}));return{type:"Multi"+n[0].type,coordinates:n.map((function(e){return e.coordinates}))}}if(e[t]instanceof Object){let n=r(e[t]);return{type:"Multi"+n.type,coordinates:[n.coordinates]}}}(e[Object.keys(e)[0]])}}function s(e){var n={type:"Feature",geometry:{},properties:{}};let o=null;for(var s in e)t.shape.find((function(e){return s.toLowerCase()==e}))?o=e[s]:n.properties[s]=e[s];if(o)n.geometry=r(o);else for(var s in n.properties)(n.properties[s]instanceof Object||n.properties[s]instanceof Array)&&(n.geometry=r({shape:n.properties[s]}),delete n.properties[s]);return n}function i(e){let t=[];return e instanceof Array?e.forEach((function(e){t.push(s(e))})):e instanceof Object&&t.push(s(e)),t}var c=function(e,n){if(!e)return null;n&&n.shape&&t.shape.push(n.shape.toLowerCase());let o=[];try{"[object XMLDocument]"!=Object.prototype.toString.call(e)&&(e=(new DOMParser).parseFromString(e,"text/xml"));let t=function e(t){let n={},o=function(e){let t={};for(var n=0;n<e.length;n++){if(3==e[n].nodeType)continue;let o=e[n].nodeName;t[o]=t.hasOwnProperty(o)?t[o]+1:1}return t}(t);for(var r=0;r<t.length;r++){var s=t[r];if(3==s.nodeType)continue;let i="";s.childNodes.length>1?i=e(s.childNodes):1==s.childNodes.length&&(i=s.childNodes[0].nodeValue?s.childNodes[0].nodeValue.trim():e(s.childNodes));let c=s.nodeName.substring(s.nodeName.indexOf(":")+1);o[s.nodeName]>1?n[c]?n[c].push(i):n[c]=[i]:n[c]=i}return n}(e.childNodes),n=t[Object.keys(t)[0]],r=n[Object.keys(n).find((function(e){return e.toLowerCase().includes("member")}))];return r instanceof Array?r.forEach((function(e){o=o.concat(i(e[Object.keys(e)[0]]))})):r instanceof Object&&(o=o.concat(i(r[Object.keys(r)[0]]))),{type:"FeatureCollection",features:o}}catch(e){return console.log(e),null}},a={getGeoJson:c};e.default=a,e.getGeoJson=c,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=parser-gml.min.js.map
